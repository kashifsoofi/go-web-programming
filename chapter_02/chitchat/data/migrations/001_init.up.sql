CREATE TABLE IF NOT EXISTS Users (
  Id        INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  Uuid      VARCHAR(36) NOT NULL UNIQUE,
  Name      VARCHAR(255),
  Email     VARCHAR(255) NOT NULL UNIQUE,
  Password  VARCHAR(255) NOT NULL,
  CreatedAt TIMESTAMP NOT NULL
);

CREATE TABLE IF NOT EXISTS Sessions (
  Id        INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  Uuid      VARCHAR(64) NOT NULL UNIQUE,
  Email     VARCHAR(255),
  UserId    INTEGER NOT NULL,
  CreatedAt TIMESTAMP NOT NULL,
  FOREIGN KEY(UserId) REFERENCES Users(Id)
);

CREATE TABLE IF NOT EXISTS Threads (
  Id        INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  Uuid      VARCHAR(36) NOT NULL UNIQUE,
  Topic     TEXT,
  UserId    INTEGER NOT NULL,
  CreatedAt TIMESTAMP NOT NULL,
  FOREIGN KEY(UserId) REFERENCES Users(Id)
);

CREATE TABLE IF NOT EXISTS Posts (
  Id        INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  Uuid      VARCHAR(36) NOT NULL UNIQUE,
  Body      TEXT,
  UserId    INTEGER NOT NULL,
  ThreadId  INTEGER NOT NULL,
  CreatedAt TIMESTAMP NOT NULL,
  FOREIGN KEY(UserId) REFERENCES Users(Id),
  FOREIGN KEY(ThreadId) REFERENCES Threads(Id)
);